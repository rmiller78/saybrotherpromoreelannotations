import{j as d}from"./jsx-runtime.DgEt2rpa.js";import{r as n,R as b}from"./index.t6I50wh0.js";import{l as J,u as ee,i as F,p as he,j as me,H as ve,c as be}from"./use-server-handoff-complete.DAeTP5Ef.js";import{n as N,W as D,y as te,o as E,H as ne,s as ge,O as y,u as re,m as xe,t as we,M as $e}from"./use-sync-refs.Bp3VvZK7.js";import{F as je}from"./XMarkIcon.Dh-2ucm4.js";function pe({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Ce=n.forwardRef(pe);function Ee(){let e=n.useRef(!1);return N(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function le(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:se)!==n.Fragment||b.Children.count(e.children)===1}let U=n.createContext(null);U.displayName="TransitionContext";var Re=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Re||{});function Te(){let e=n.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ye(){let e=n.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=n.createContext(null);A.displayName="NestingContext";function I(e){return"children"in e?I(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ae(e,t){let r=ge(e),s=n.useRef([]),m=Ee(),w=he(),l=E((u,a=y.Hidden)=>{let o=s.current.findIndex(({el:i})=>i===u);o!==-1&&(re(a,{[y.Unmount](){s.current.splice(o,1)},[y.Hidden](){s.current[o].state="hidden"}}),w.microTask(()=>{var i;!I(s)&&m.current&&((i=r.current)==null||i.call(r))}))}),R=E(u=>{let a=s.current.find(({el:o})=>o===u);return a?a.state!=="visible"&&(a.state="visible"):s.current.push({el:u,state:"visible"}),()=>l(u,y.Unmount)}),$=n.useRef([]),v=n.useRef(Promise.resolve()),g=n.useRef({enter:[],leave:[]}),j=E((u,a,o)=>{$.current.splice(0),t&&(t.chains.current[a]=t.chains.current[a].filter(([i])=>i!==u)),t?.chains.current[a].push([u,new Promise(i=>{$.current.push(i)})]),t?.chains.current[a].push([u,new Promise(i=>{Promise.all(g.current[a].map(([T,P])=>P)).then(()=>i())})]),a==="enter"?v.current=v.current.then(()=>t?.wait.current).then(()=>o(a)):o(a)}),p=E((u,a,o)=>{Promise.all(g.current[a].splice(0).map(([i,T])=>T)).then(()=>{var i;(i=$.current.shift())==null||i()}).then(()=>o(a))});return n.useMemo(()=>({children:s,register:R,unregister:l,onStart:j,onStop:p,wait:v,chains:g}),[R,l,s,j,p,g,v])}let se=n.Fragment,ie=$e.RenderStrategy;function Fe(e,t){var r,s;let{transition:m=!0,beforeEnter:w,afterEnter:l,beforeLeave:R,afterLeave:$,enter:v,enterFrom:g,enterTo:j,entered:p,leave:u,leaveFrom:a,leaveTo:o,...i}=e,[T,P]=n.useState(null),c=n.useRef(null),h=le(e),oe=te(...h?[c,t,P]:t===null?[]:[t]),G=(r=i.unmount)==null||r?y.Unmount:y.Hidden,{show:x,appear:K,initial:Q}=Te(),[C,_]=n.useState(x?"visible":"hidden"),V=ye(),{register:M,unregister:k}=V;N(()=>M(c),[M,c]),N(()=>{if(G===y.Hidden&&c.current){if(x&&C!=="visible"){_("visible");return}return re(C,{hidden:()=>k(c),visible:()=>M(c)})}},[C,c,M,k,x,G]);let B=J();N(()=>{if(h&&B&&C==="visible"&&c.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[c,C,B,h]);let de=Q&&!K,Y=K&&x&&Q,W=n.useRef(!1),L=ae(()=>{W.current||(_("hidden"),k(c))},V),Z=E(X=>{W.current=!0;let O=X?"enter":"leave";L.onStart(c,O,H=>{H==="enter"?w?.():H==="leave"&&R?.()})}),q=E(X=>{let O=X?"enter":"leave";W.current=!1,L.onStop(c,O,H=>{H==="enter"?l?.():H==="leave"&&$?.()}),O==="leave"&&!I(L)&&(_("hidden"),k(c))});n.useEffect(()=>{h&&m||(Z(x),q(x))},[x,h,m]);let ce=!(!m||!h||!B||de),[,f]=me(ce,T,x,{start:Z,end:q}),fe=xe({ref:oe,className:((s=we(i.className,Y&&v,Y&&g,f.enter&&v,f.enter&&f.closed&&g,f.enter&&!f.closed&&j,f.leave&&u,f.leave&&!f.closed&&a,f.leave&&f.closed&&o,!f.transition&&x&&p))==null?void 0:s.trim())||void 0,...ve(f)}),S=0;return C==="visible"&&(S|=F.Open),C==="hidden"&&(S|=F.Closed),f.enter&&(S|=F.Opening),f.leave&&(S|=F.Closing),b.createElement(A.Provider,{value:L},b.createElement(be,{value:S},ne({ourProps:fe,theirProps:i,defaultTag:se,features:ie,visible:C==="visible",name:"Transition.Child"})))}function Ne(e,t){let{show:r,appear:s=!1,unmount:m=!0,...w}=e,l=n.useRef(null),R=le(e),$=te(...R?[l,t]:t===null?[]:[t]);J();let v=ee();if(r===void 0&&v!==null&&(r=(v&F.Open)===F.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,j]=n.useState(r?"visible":"hidden"),p=ae(()=>{r||j("hidden")}),[u,a]=n.useState(!0),o=n.useRef([r]);N(()=>{u!==!1&&o.current[o.current.length-1]!==r&&(o.current.push(r),a(!1))},[o,r]);let i=n.useMemo(()=>({show:r,appear:s,initial:u}),[r,s,u]);N(()=>{r?j("visible"):!I(p)&&l.current!==null&&j("hidden")},[r,p]);let T={unmount:m},P=E(()=>{var h;u&&a(!1),(h=e.beforeEnter)==null||h.call(e)}),c=E(()=>{var h;u&&a(!1),(h=e.beforeLeave)==null||h.call(e)});return b.createElement(A.Provider,{value:p},b.createElement(U.Provider,{value:i},ne({ourProps:{...T,as:n.Fragment,children:b.createElement(ue,{ref:$,...T,...w,beforeEnter:P,beforeLeave:c})},theirProps:{},defaultTag:n.Fragment,features:ie,visible:g==="visible",name:"Transition"})))}function Pe(e,t){let r=n.useContext(U)!==null,s=ee()!==null;return b.createElement(b.Fragment,null,!r&&s?b.createElement(z,{ref:t,...e}):b.createElement(ue,{ref:t,...e}))}let z=D(Ne),ue=D(Fe),Se=D(Pe),He=Object.assign(z,{Child:Se,Root:z});const Me=(e,t)=>e.data.autogenerate.type==="home"?t?`/${t}`:"/":e.data.autogenerate.enabled?`${t?`/${t}`:""}/events/${e.data.slug||e.id}`:`${t?`/${t}`:""}/pages/${e.data.slug||e.id}`,Ie=e=>{const[t,r]=n.useState(!1),s=n.useMemo(()=>e.pages.find(l=>l.data.autogenerate.type==="home")?.id,[e.pages]),m=n.useMemo(()=>`${e.baseUrl?`/${e.baseUrl}`:""}/tags`===e.url.pathname,[e.baseUrl,e.url]),w=l=>m?!1:!e.slug&&l.id===s?!0:e.slug&&(e.slug===l.data.slug||e.slug===l.id);return d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>r(!t),type:"button",children:d.jsx(Ce,{className:"w-8 h-8","aria-label":"expand contract table of contents"})}),t&&d.jsx("div",{className:"absolute top-0 left-0 h-dvh w-dvw",onClick:()=>r(!1)}),d.jsx(He,{show:t,children:d.jsxs("div",{className:"shadow absolute top-0 left-0 h-[calc(100dvh_-_78px)] w-80 bg-white transition duration-200 ease-in-out data-[closed]:-translate-x-full text-black text-sm overflow-y-auto",children:[d.jsx("div",{className:"flex w-full h-24 justify-end px-8",children:d.jsx("button",{type:"button",onClick:()=>r(!1),children:d.jsx(je,{className:"w-8 h-8"})})}),e.pages.map(l=>d.jsx("a",{href:Me(l,e.baseUrl),children:d.jsx("div",{className:"p-4 hover:bg-blue-hover",children:d.jsx("p",{className:`${w(l)?"font-bold":""} ${l.data.parent?"ml-6":""}`,title:l.data.title,children:l.data.title},l.id)})},l.id)),e.project.data.project.tags&&e.project.data.project.tags.tags.length>0&&d.jsx("a",{href:`${e.baseUrl?`/${e.baseUrl}`:""}/tags`,children:d.jsx("div",{className:"p-4 hover:bg-blue-hover",children:d.jsx("p",{className:m?"font-bold":"",children:"Index"})})})]})})]})};export{Ie as default};
